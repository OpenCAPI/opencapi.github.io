<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libocxl: OpenCAPI MMIO Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libocxl
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">OpenCAPI MMIO Functions</div>  </div>
</div><!--header-->
<div class="contents">

<p>The MMIO functions map the global and per-PASID MMIO spaces of the AFU into the address space of the process, as well as moderating access to them.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaae2d0f92be910df16975af7a74f97a21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#gaae2d0f92be910df16975af7a74f97a21">global_mmio_open</a> (ocxl_afu *afu)</td></tr>
<tr class="memdesc:gaae2d0f92be910df16975af7a74f97a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open the global MMIO descriptor on an AFU.  <a href="#gaae2d0f92be910df16975af7a74f97a21">More...</a><br /></td></tr>
<tr class="separator:gaae2d0f92be910df16975af7a74f97a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34b95501e296f609d57b8a4a00860334"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga34b95501e296f609d57b8a4a00860334">ocxl_mmio_map_advanced</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, <a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a> type, size_t size, int prot, uint64_t flags, off_t offset, <a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> *region)</td></tr>
<tr class="memdesc:ga34b95501e296f609d57b8a4a00860334"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map an MMIO area of an AFU.  <a href="#ga34b95501e296f609d57b8a4a00860334">More...</a><br /></td></tr>
<tr class="separator:ga34b95501e296f609d57b8a4a00860334"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6287a92804c0e6c9d58925155c948221"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga6287a92804c0e6c9d58925155c948221">ocxl_mmio_map</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, <a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a> type, <a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> *region)</td></tr>
<tr class="memdesc:ga6287a92804c0e6c9d58925155c948221"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map an MMIO area of an AFU.  <a href="#ga6287a92804c0e6c9d58925155c948221">More...</a><br /></td></tr>
<tr class="separator:ga6287a92804c0e6c9d58925155c948221"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga555fc82ff63edcd6654aee5112956444"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga555fc82ff63edcd6654aee5112956444">ocxl_mmio_unmap</a> (<a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> region)</td></tr>
<tr class="memdesc:ga555fc82ff63edcd6654aee5112956444"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unmap an MMIO region from an AFU.  <a href="#ga555fc82ff63edcd6654aee5112956444">More...</a><br /></td></tr>
<tr class="separator:ga555fc82ff63edcd6654aee5112956444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2291e7742a0afe8de8bf5fec3a2961e0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga2291e7742a0afe8de8bf5fec3a2961e0">ocxl_mmio_get_fd</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, <a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a> type)</td></tr>
<tr class="memdesc:ga2291e7742a0afe8de8bf5fec3a2961e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a file descriptor for an MMIO area of an AFU.  <a href="#ga2291e7742a0afe8de8bf5fec3a2961e0">More...</a><br /></td></tr>
<tr class="separator:ga2291e7742a0afe8de8bf5fec3a2961e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga17f5d7a0c5dde22272bcaab893564f5c"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga17f5d7a0c5dde22272bcaab893564f5c">ocxl_mmio_size</a> (<a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a> afu, <a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a> type)</td></tr>
<tr class="memdesc:ga17f5d7a0c5dde22272bcaab893564f5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the size of an MMIO region for an AFU.  <a href="#ga17f5d7a0c5dde22272bcaab893564f5c">More...</a><br /></td></tr>
<tr class="separator:ga17f5d7a0c5dde22272bcaab893564f5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e1bd6fc504e18c8d09eefbc5df3965a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga6e1bd6fc504e18c8d09eefbc5df3965a">ocxl_mmio_get_info</a> (<a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> region, void **address, size_t *size)</td></tr>
<tr class="memdesc:ga6e1bd6fc504e18c8d09eefbc5df3965a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the address &amp; size of a mapped MMIO region.  <a href="#ga6e1bd6fc504e18c8d09eefbc5df3965a">More...</a><br /></td></tr>
<tr class="separator:ga6e1bd6fc504e18c8d09eefbc5df3965a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6a48836ea2ebd776c63f10327cb6de67"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga6a48836ea2ebd776c63f10327cb6de67">ocxl_mmio_read32</a> (<a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> mmio, off_t offset, <a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a> endian, uint32_t *out)</td></tr>
<tr class="memdesc:ga6a48836ea2ebd776c63f10327cb6de67"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a 32-bit value from an AFU's MMIO region &amp; convert endianness.  <a href="#ga6a48836ea2ebd776c63f10327cb6de67">More...</a><br /></td></tr>
<tr class="separator:ga6a48836ea2ebd776c63f10327cb6de67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d5cd11344b3ba8c97a9c5274224032b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga4d5cd11344b3ba8c97a9c5274224032b">ocxl_mmio_read64</a> (<a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> mmio, off_t offset, <a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a> endian, uint64_t *out)</td></tr>
<tr class="memdesc:ga4d5cd11344b3ba8c97a9c5274224032b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a 64-bit value from an AFU's MMIO region &amp; convert endianness.  <a href="#ga4d5cd11344b3ba8c97a9c5274224032b">More...</a><br /></td></tr>
<tr class="separator:ga4d5cd11344b3ba8c97a9c5274224032b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga633bb8d3c986e99ebc71b8156c3b87fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga633bb8d3c986e99ebc71b8156c3b87fd">ocxl_mmio_write32</a> (<a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> mmio, off_t offset, <a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a> endian, uint32_t value)</td></tr>
<tr class="memdesc:ga633bb8d3c986e99ebc71b8156c3b87fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert endianness and write a 32-bit value to an AFU's MMIO region.  <a href="#ga633bb8d3c986e99ebc71b8156c3b87fd">More...</a><br /></td></tr>
<tr class="separator:ga633bb8d3c986e99ebc71b8156c3b87fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga21e8de35a2c9a76f90aff2442e742332"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ocxl__mmio.html#ga21e8de35a2c9a76f90aff2442e742332">ocxl_mmio_write64</a> (<a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> mmio, off_t offset, <a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a> endian, uint64_t value)</td></tr>
<tr class="memdesc:ga21e8de35a2c9a76f90aff2442e742332"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert endianness and write a 64-bit value to an AFU's MMIO region.  <a href="#ga21e8de35a2c9a76f90aff2442e742332">More...</a><br /></td></tr>
<tr class="separator:ga21e8de35a2c9a76f90aff2442e742332"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The MMIO functions map the global and per-PASID MMIO spaces of the AFU into the address space of the process, as well as moderating access to them. </p>
<p>Only 32bit &amp; 64bit accesses are supported. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaae2d0f92be910df16975af7a74f97a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae2d0f92be910df16975af7a74f97a21">&#9670;&nbsp;</a></span>global_mmio_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> global_mmio_open </td>
          <td>(</td>
          <td class="paramtype">ocxl_afu *&#160;</td>
          <td class="paramname"><em>afu</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open the global MMIO descriptor on an AFU. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">afu</td><td>the AFU</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_NO_DEV</td><td>if the MMIO descriptor could not be opened </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00096">96</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga2291e7742a0afe8de8bf5fec3a2961e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2291e7742a0afe8de8bf5fec3a2961e0">&#9670;&nbsp;</a></span>ocxl_mmio_get_fd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ocxl_mmio_get_fd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a file descriptor for an MMIO area of an AFU. </p>
<p>Once obtained, the descriptor may be used to manually MMAP a section of the MMIO area.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ocxl__mmio.html#ga17f5d7a0c5dde22272bcaab893564f5c" title="Get the size of an MMIO region for an AFU. ">ocxl_mmio_size()</a> to get the size of the MMIO areas</dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">afu</td><td>the AFU to operate on </td></tr>
    <tr><td class="paramname">type</td><td>the type of MMIO area to map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the requested descriptor, or -1 if it is not available </dd></dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00362">362</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga6e1bd6fc504e18c8d09eefbc5df3965a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e1bd6fc504e18c8d09eefbc5df3965a">&#9670;&nbsp;</a></span>ocxl_mmio_get_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_mmio_get_info </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a>&#160;</td>
          <td class="paramname"><em>region</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the address &amp; size of a mapped MMIO region. </p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened, and the MMIO area mapped</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">region</td><td>the MMIO region to get the details for </td></tr>
    <tr><td class="paramname">address</td><td>[out] The address of the MMIO region </td></tr>
    <tr><td class="paramname">size</td><td>[out] the size of the MMIO region in bytes</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>if the details were retrieved </td></tr>
    <tr><td class="paramname">OCXL_INVALID_ARGS</td><td>if the region is invalid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00419">419</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga6287a92804c0e6c9d58925155c948221"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6287a92804c0e6c9d58925155c948221">&#9670;&nbsp;</a></span>ocxl_mmio_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_mmio_map </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> *&#160;</td>
          <td class="paramname"><em>region</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map an MMIO area of an AFU. </p>
<p>Maps the entire global/per-PASID region of MMIO memory on the AFU with read/write access granted.</p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened, and if a per-PASID region is to be mapped, the AFU has been attached</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__ocxl__afu.html#gab1b595ee41f713516ec0afd717e1db60" title="Attach the calling process&#39;s memory to an open AFU context. ">ocxl_afu_attach()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">afu</td><td>the AFU to operate on </td></tr>
    <tr><td class="paramname">type</td><td>the type of MMIO area to map </td></tr>
    <tr><td class="paramname">region</td><td>[out] the MMIO region handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>on success </td></tr>
    <tr><td class="paramname">OCXL_NO_MEM</td><td>if the map failed </td></tr>
    <tr><td class="paramname">OCXL_NO_CONTEXT</td><td>if the AFU has not been opened </td></tr>
    <tr><td class="paramname">OCXL_INVALID_ARGS</td><td>if the flags are not valid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00324">324</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga34b95501e296f609d57b8a4a00860334"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga34b95501e296f609d57b8a4a00860334">&#9670;&nbsp;</a></span>ocxl_mmio_map_advanced()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_mmio_map_advanced </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>prot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a> *&#160;</td>
          <td class="paramname"><em>region</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map an MMIO area of an AFU. </p>
<p>Provides finer grain control of MMIO region mapping. Allows for protection parameters to be specified, as well as allowing partial mappings (with PAGE_SIZE granularity).</p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">afu</td><td>the AFU to operate on </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">type</td><td>the type of MMIO area to map </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">size</td><td>the size of the MMIO region to map (or 0 to map the full region) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">prot</td><td>the protection parameters as per mmap/mprotect </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">flags</td><td>Additional flags to modify the map behavior (currently unused, must be 0) </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">offset</td><td>the offset of the MMIO region to map (or 0 to map the full region), should be a multiple of PAGE_SIZE </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">region</td><td>the MMIO region handle</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>on success </td></tr>
    <tr><td class="paramname">OCXL_NO_MEM</td><td>if the map failed </td></tr>
    <tr><td class="paramname">OCXL_NO_CONTEXT</td><td>if the AFU has not been opened </td></tr>
    <tr><td class="paramname">OCXL_INVALID_ARGS</td><td>if the flags are not valid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00262">262</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga6a48836ea2ebd776c63f10327cb6de67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6a48836ea2ebd776c63f10327cb6de67">&#9670;&nbsp;</a></span>ocxl_mmio_read32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_mmio_read32 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a>&#160;</td>
          <td class="paramname"><em>mmio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a>&#160;</td>
          <td class="paramname"><em>endian</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a 32-bit value from an AFU's MMIO region &amp; convert endianness. </p>
<p>Read the 32-bit value at offset from the address of the mapped MMIO space, and convert endianness as specified by the endian parameter. Memory barriers are inserted before and after the MMIO operation.</p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened, and the MMIO area mapped </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">mmio</td><td>the MMIO area to operate on </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">offset</td><td>A byte address that is aligned on a word (4 byte) boundary. It must be lower than the MMIO size (-4 bytes) reported by <a class="el" href="group__ocxl__mmio.html#ga17f5d7a0c5dde22272bcaab893564f5c" title="Get the size of an MMIO region for an AFU. ">ocxl_mmio_size()</a> </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">endian</td><td>the endianness of the stored data (will be converted to native) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>the value that was read</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>if the value was read </td></tr>
    <tr><td class="paramname">OCXL_NO_CONTEXT</td><td>if the MMIO area is not mapped </td></tr>
    <tr><td class="paramname">OCXL_OUT_OF_BOUNDS</td><td>if the offset exceeds the available area </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00650">650</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga4d5cd11344b3ba8c97a9c5274224032b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4d5cd11344b3ba8c97a9c5274224032b">&#9670;&nbsp;</a></span>ocxl_mmio_read64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_mmio_read64 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a>&#160;</td>
          <td class="paramname"><em>mmio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a>&#160;</td>
          <td class="paramname"><em>endian</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t *&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a 64-bit value from an AFU's MMIO region &amp; convert endianness. </p>
<p>Read the 64-bit value at offset from the address of the mapped MMIO space, and convert endianness as specified by the endian parameter. Memory barriers are inserted before and after the MMIO operation.</p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened, and the MMIO area mapped</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">mmio</td><td>the MMIO area to operate on </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">offset</td><td>A byte address that is aligned on an 8 byte boundary. It must be lower than the MMIO size (-8 bytes) reported by ocxl_afu_get_mmio_size() </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">endian</td><td>the endianness of the stored data (will be converted to native) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">out</td><td>the value that was read</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>if the value was read </td></tr>
    <tr><td class="paramname">OCXL_NO_CONTEXT</td><td>if the MMIO area is not mapped </td></tr>
    <tr><td class="paramname">OCXL_OUT_OF_BOUNDS</td><td>if the offset exceeds the available area </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00694">694</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga17f5d7a0c5dde22272bcaab893564f5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga17f5d7a0c5dde22272bcaab893564f5c">&#9670;&nbsp;</a></span>ocxl_mmio_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t ocxl_mmio_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a21bfdc5f2f8df75e22bf12441644d8fb">ocxl_afu_h</a>&#160;</td>
          <td class="paramname"><em>afu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a1eebb9cf864a4fa0a8f4e54c56494b1a">ocxl_mmio_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the size of an MMIO region for an AFU. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">afu</td><td>the AFU to get the MMIO size of </td></tr>
    <tr><td class="paramname">type</td><td>the type of the MMIO region</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the MMIO region in bytes </dd></dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00389">389</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga555fc82ff63edcd6654aee5112956444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga555fc82ff63edcd6654aee5112956444">&#9670;&nbsp;</a></span>ocxl_mmio_unmap()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ocxl_mmio_unmap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a>&#160;</td>
          <td class="paramname"><em>region</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unmap an MMIO region from an AFU. </p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened, and the MMIO area mapped</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">region</td><td>the MMIO region to unmap </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00336">336</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga633bb8d3c986e99ebc71b8156c3b87fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga633bb8d3c986e99ebc71b8156c3b87fd">&#9670;&nbsp;</a></span>ocxl_mmio_write32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_mmio_write32 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a>&#160;</td>
          <td class="paramname"><em>mmio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a>&#160;</td>
          <td class="paramname"><em>endian</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert endianness and write a 32-bit value to an AFU's MMIO region. </p>
<p>Convert endianness and write the 32-bit word at offset from the address of the mapped MMIO space. Memory barriers are inserted before and after the MMIO operation.</p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened, and the MMIO area mapped</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mmio</td><td>the MMIO area to operate on </td></tr>
    <tr><td class="paramname">offset</td><td>A byte address that is aligned on a 4 byte boundary. It must be lower than the MMIO size (-4 bytes) reported by <a class="el" href="group__ocxl__mmio.html#ga17f5d7a0c5dde22272bcaab893564f5c" title="Get the size of an MMIO region for an AFU. ">ocxl_mmio_size()</a></td></tr>
    <tr><td class="paramname">endian</td><td>the endianness of the stored data (value will be converted to this before storing it) </td></tr>
    <tr><td class="paramname">value</td><td>the value to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>if the value was written </td></tr>
    <tr><td class="paramname">OCXL_NO_CONTEXT</td><td>if the MMIO area is not mapped </td></tr>
    <tr><td class="paramname">OCXL_OUT_OF_BOUNDS</td><td>if the offset exceeds the available area </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00738">738</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
<a id="ga21e8de35a2c9a76f90aff2442e742332"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga21e8de35a2c9a76f90aff2442e742332">&#9670;&nbsp;</a></span>ocxl_mmio_write64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libocxl_8h.html#a0a18f33ce24edf75b02184395bb6ea55">ocxl_err</a> ocxl_mmio_write64 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#ac56fcf93cf65224d95aef550c872d225">ocxl_mmio_h</a>&#160;</td>
          <td class="paramname"><em>mmio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">off_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="libocxl_8h.html#a99182fe49c19594a04b05aae43342d4f">ocxl_endian</a>&#160;</td>
          <td class="paramname"><em>endian</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert endianness and write a 64-bit value to an AFU's MMIO region. </p>
<p>Convert endianness and write the 32-bit word at offset from the address of the mapped MMIO space. Memory barriers are inserted before and after the MMIO operation.</p>
<dl class="section pre"><dt>Precondition</dt><dd>the AFU has been opened, and the MMIO area mapped</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mmio</td><td>the MMIO area to operate on </td></tr>
    <tr><td class="paramname">offset</td><td>A byte address that is aligned on an 8 byte boundary. It must be lower than the MMIO size (-8 bytes) reported by <a class="el" href="group__ocxl__mmio.html#ga17f5d7a0c5dde22272bcaab893564f5c" title="Get the size of an MMIO region for an AFU. ">ocxl_mmio_size()</a> </td></tr>
    <tr><td class="paramname">endian</td><td>the endianness of the stored data (value will be converted to this before storing it) </td></tr>
    <tr><td class="paramname">value</td><td>the value to write</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OCXL_OK</td><td>if the value was written </td></tr>
    <tr><td class="paramname">OCXL_NO_CONTEXT</td><td>if the MMIO area is not mapped </td></tr>
    <tr><td class="paramname">OCXL_OUT_OF_BOUNDS</td><td>if the offset exceeds the available area </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="mmio_8c_source.html#l00773">773</a> of file <a class="el" href="mmio_8c_source.html">mmio.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
